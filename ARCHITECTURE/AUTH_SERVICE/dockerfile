FROM golang

WORKDIR /app/auth_service

COPY . .

EXPOSE 8079

RUN export ADDR=$ADDR

RUN go mod tidy -v && \
    go build -o AUTH_SERVICE \
    ./.

ENTRYPOINT ["/app/auth_service/AUTH_SERVICE"]